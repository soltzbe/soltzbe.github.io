!function(n){var e,o,r="splice",i=n.csa,t={},u={},f=n.csa._s,c=0,a={},s={},g={},l=setTimeout,h=Object.keys;function d(n,t){return i(n,t)}function v(n,t){var i=u[n]||{};O(i,t),u[n]=i,l(S,0)}function p(n,t,i){var e=!0;i&&i.buffered&&(e=(g[n]||[]).every(function(n){return!1!==t(n)})),e&&(a[n]||(a[n]=[]),a[n].push(t))}function m(n,t){if(n in s)t(s[n]);else{p(n,function(n){return t(n),!1})}}function b(n){if(i("Errors")("logError",n),t.DEBUG)throw n}function w(){return Math.abs(4294967295*Math.random()|0).toString(36)}function y(n,t){return function(){try{n.apply(this,arguments)}catch(n){b(n.message||n)}}}function S(){for(var n=0;n<f.length;){var t=f[n],i=t[0]in u;if(!i&&!o)return void(c=t.length);i?(f[r](c=n,1),D(t)):n++}}function D(n){var arguments,t=u[n[0]],i=(arguments=n[1])[0];if(!t||!t[i])return b("Undefined function: "+t+"/"+i);e=n[3],u[n[2]]=t[i].apply(t,arguments.slice(1))||{},e=0}function E(){o=1,S()}function O(t,i){h(i).forEach(function(n){t[n]=i[n]})}m("$beforeunload",E),v("Config",{instance:function(n){O(t,n)}}),i.plugin=y(function(n){n(d)}),d.config=t,d.register=v,d.on=p,d.removeListener=function(n,t){var i=a[n];i&&i[r](i.indexOf(t),1)},d.once=m,d.emit=function(n,t,i){for(var e=a[n]||[],o=0;o<e.length;)!1===e[o](t)?e[r](o,1):o++;s[n]=t||{},i&&i.buffered&&(g[n]||(g[n]=[]),100<=g[n].length&&g[n].shift(),g[n].push(t||{}))},d.UUID=function(){return[w(),w(),w(),w()].join("-")},d.time=function(n){var t=e?new Date(e.time):new Date;return"ISO"===n?t.toISOString():t.getTime()},d.error=b,d.exec=y,(d.global=n).csa._s.push=function(n){n[0]in u&&(!f.length||o)?D(n):f[r](c++,0,n)},S(),l(function(){l(E,t.SkipMissingPluginsTimeout||5e3)},1)}("undefined"!=typeof window?window:global);
csa.plugin(function(e){var n,r,o={},t="localStorage",c="sessionStorage",u="local",a="session";function i(t,n){var r;try{o[n]=!!(r=e.global[t]),r=r||{}}catch(t){o[n]=!(r={})}return r}function s(){n=n||i(t,u),r=r||i(c,a)}function f(t){return t&&t[a]?r:n}e.store=function(t,n,r){try{s();var e=f(r);if(!t)return Object.keys(e);if(!n)return e[t];e[t]=n}catch(t){}},e.storageSupport=function(){return s(),o},e.deleteStored=function(t,n){try{s(),delete f(n)[t]}catch(t){}}});
csa.plugin(function(s){s.register("Errors",{logError:function(r){s("Metrics",{producerId:"csa",dimensions:{message:r}})("recordMetric","jsError",1)}})});
csa.plugin(function(r){var o,e=r.global,i=r("Events"),d=e.location,f=e.document,a=((e.performance||{}).navigation||{}).type,t=e.addEventListener,s=r.emit,u={};function n(a,e){var t=!!o,n=(e=e||{}).keepPageAttributes;t&&(s("$beforePageTransition"),s("$pageTransition")),t&&!n&&i("removeEntity","page"),o=r.UUID(),n?u.id=o:u={schemaId:"<ns>.PageEntity.1",id:o,url:d.href,server:d.hostname,path:d.pathname,referrer:f.referrer,title:f.title},Object.keys(a||{}).forEach(function(e){u[e]=a[e]}),i("setEntity",{page:u}),s("$pageChange",u,{buffered:1}),t&&s("$afterPageTransition")}function g(){s("$load"),s("$ready"),s("$afterload")}function l(){s("$ready"),s("$beforeunload"),s("$unload"),s("$afterunload")}d&&f&&(t&&(t("beforeunload",l),t("pagehide",l),"complete"===f.readyState?g():t("load",g)),r.register("SPA",{newPage:n}),n({transitionType:{0:"hard",1:"refresh",2:"back-button"}[a]||"unknown"}))});
csa.plugin(function(c){var t="Events",e="UNKNOWN",a="id",u="all",n="messageId",i="timestamp",f="producerId",o="application",r="obfuscatedMarketplaceId",s="entities",d="schemaId",l="version",p="attributes",v="<ns>",g=c.config,h=(c.global.location||{}).host,m=g[t+".Namespace"]||"csa_other",I=g.Application||"Other"+(h?":"+h:""),b=c("Transport"),y={},O=function(t,e){Object.keys(t).forEach(e)};function E(n,i,o){O(i,function(t){var e=o===u||(o||{})[t];t in n||(n[t]={version:1,id:i[t][a]||c.UUID()}),U(n[t],i[t],e)})}function U(e,n,i){O(n,function(t){!function(t,e,n){return"string"!=typeof e&&t!==l?c.error("Attribute is not of type string: "+t):!0===n||1===n||(t===a||!!~(n||[]).indexOf(t))}(t,n[t],i)||(e[t]=n[t])})}function N(o,t,r){O(t,function(t){var e=o[t];if(e[d]){var n={},i={};n[a]=e[a],n[f]=e[f]||r,n[d]=e[d],n[l]=e[l]++,n[p]=i,k(n),U(i,e,1),A(i),b("log",n)}})}function k(t){t[i]=function(t){return"number"==typeof t&&(t=new Date(t).toISOString()),t||c.time("ISO")}(t[i]),t[n]=c.UUID(),t[o]=I,t[r]=g.ObfuscatedMarketplaceId||e,t[d]=t[d].replace(v,m)}function A(t){delete t[l],delete t[d],delete t[f]}function D(o){var r={};this.log=function(t,e){var n={},i=(e||{}).ent;return t?"string"!=typeof t[d]?c.error("A valid schema id is required for the event"):(k(t),E(n,y,i),E(n,r,i),E(n,t[s]||{},i),O(n,function(t){A(n[t])}),t[f]=o[f],t[s]=n,void b("log",t)):c.error("The event cannot be undefined")},this.setEntity=function(t){E(r,t,u),N(r,t,o[f])}}c.register(t,{setEntity:function(t){E(y,t,u),N(y,t,"csa")},removeEntity:function(t){delete y[t]},instance:function(t){return new D(t)}})});
csa.plugin(function(s){var c,l="Transport",d="post",u="preflight",r="csa.cajun.",i="store",a="deleteStored",n="addEventListener",f="sendBeacon",t=0,e=s.config[l+".BufferSize"]||2e3,g=s.config[l+".RetryDelay"]||1500,o=[],h=0,p=[],v=s.global,y=v.document,m=s.config[l+".FlushInterval"]||5e3,E=0;function T(n){if(864e5<s.time()-+new Date(n.timestamp))return s.error("Event is too old: "+n);h<e&&(o.push(n),h++,!E&&t&&(E=setTimeout(R,m)))}function R(){p.forEach(function(t){var e=[];o.forEach(function(n){t.accepts(n)&&e.push(n)}),e.length&&(t.chunks?t.chunks(e).forEach(function(n){S(t,n)}):S(t,e))}),o=[],E=0}function S(t,e){function o(){s[a](r+n)}var n=s.UUID();s[i](r+n,JSON.stringify(e)),[function(n,t,e){var o=v.navigator||{},r=v.cordova||{};if(!o[f]||!n[d])return 0;n[u]&&r&&"ios"===r.platformId&&!c&&((new Image).src=n[u]().url,c=1);var i=n[d](t);if(!i.type&&o[f](i.url,i.body))return e(),1},function(n,t,e){if(!n[d])return 0;var o=n[d](t),r=o.url,i=o.body,c=o.type,u=new XMLHttpRequest,a=0;function f(n,t,e){u.open("POST",n),e&&u.setRequestHeader("Content-Type",e),u.send(t)}return u.onload=function(){u.status<299?e():s.config[l+".XHRRetries"]&&a<3&&setTimeout(function(){f(r,i,c)},++a*g)},f(r,i,c),1}].some(function(n){try{return n(t,e,o)}catch(n){}})}s.once("$afterload",function(){t=1,function(e){(s[i]()||[]).forEach(function(n){if(!n.indexOf(r))try{var t=s[i](n);s[a](n),JSON.parse(t).forEach(e)}catch(n){s.error(n)}})}(T),y&&y[n]&&y[n]("visibilitychange",R,!1),R()}),s.once("$afterunload",function(){t=1,R()}),s.on("$afterPageTransition",function(){h=0}),s.register(l,{log:T,register:function(n){p.push(n)}})});
csa.plugin(function(n){var r=n.config["Events.SushiEndpoint"];n("Transport")("register",{accepts:function(n){return n.schemaId},post:function(n){var t=n.map(function(n){return{data:n}});return{url:r,body:JSON.stringify({events:t})}},preflight:function(){var n,t=/\/\/(.*?)\//.exec(r);return t&&t[1]&&(n="https://"+t[1]+"/ping"),{url:n}},chunks:function(n){for(var t=[];500<n.length;)t.push(n.splice(0,500));return t.push(n),t}})});
csa.plugin(function(e){var i="transitionStart",n="pageVisible",t="PageTiming",a="visibilitychange",o=e("Events",{producerId:"csa"}),r=(e.global.performance||{}).timing,d=["navigationStart","unloadEventStart","unloadEventEnd","redirectStart","redirectEnd","fetchStart","domainLookupStart","domainLookupEnd","connectStart","connectEnd","secureConnectionStart","requestStart","responseStart","responseEnd","domLoading","domInteractive","domContentLoadedEventStart","domContentLoadedEventEnd","domComplete","loadEventStart","loadEventEnd"],s=e.global.document||{},c=(r||{}).navigationStart,u=c,l={},m=0,g=0,v=e.config[t+".BatchInterval"]||3e3,f=e.config[t+".pageVisibilityAdjustment"]||!1,p=0,E=!0;if(!r||null===c||c<=0||void 0===c)return e.error("Invalid navigation timing data: "+c);function S(t,n){null!=t&&(n=n||e.time(),t===i&&(u=n),l[t]=n,h(),e.emit("$timing:"+t,n))}function b(){!function(){if(p)return;for(var t=0;t<d.length;t++)r[d[t]]&&S(d[t],r[d[t]]);p=1}(),m=1,h(!0)}function h(t){m&&E&&!g&&(g=setTimeout(y,t?0:v))}function y(){0<Object.keys(l).length&&(o("log",{markers:function(t,n){var e={};for(var i in t)t.hasOwnProperty(i)&&(e[i]=Math.max(0,t[i]-n));return e}(l,u),markerTimestamps:function(t){for(var n in t)t.hasOwnProperty(n)&&(t[n]=Math.floor(t[n]));return t}(l),navigationStartTimestamp:u?new Date(u).toISOString():null,schemaId:"<ns>.PageLatency.5"},{ent:{page:["pageType","subPageType","requestId"]}}),l={}),g=0}function L(){return!s.hidden||"visible"===s.visibilityState}f&&("boolean"==typeof s.hidden||"string"==typeof s.visibilityState)&&s.addEventListener&&s.removeEventListener&&((E=L())?(S(n,c),h()):s.addEventListener(a,function t(){(E=L())&&(u=e.time(),s.removeEventListener(a,t),S(n,u),S(i,u),h())})),e.once("$unload",b),e.once("$load",b),e.on("$beforePageTransition",y),e.on("$pageTransition",function(){u=e.time()}),e.register(t,{mark:S})});
csa.plugin(function(u){var a="Metrics";function r(e){var r=e.producerId,n=e.logger,t=n||u("Events",{producerId:r}),i=u.config[a+".BatchInterval"]||3e3,o={},c=(e||{}).dimensions||{},s=0;if(!r&&!n)return u.error("Either a producer id or custom logger must be defined");function d(){Object.keys(o).length&&(t("log",{schemaId:e.schemaId||"<ns>.Metric.3",metrics:o,dimensions:c},e.logOptions||{ent:{page:["pageType","subPageType","requestId"]}}),o={}),s=0}this.recordMetric=function(e,r){o[e]=r,s=s||setTimeout(d,i)},u.on("$beforeunload",d),u.on("$beforePageTransition",d)}new r({producerId:"csa"}).recordMetric("baselineMetricEvent",1),u.register(a,{instance:function(e){return new r(e||{})}})});
csa.plugin(function(c){var e="Timers",r=(c.global.performance||{}).timing,s=(r||{}).navigationStart||c.time(),u=c.config[e+".BatchInterval"]||3e3;function n(e){var r=(e=e||{}).producerId,n=e.logger,o={},t=0,i=n||c("Events",{producerId:r});if(!r&&!n)return c.error("Either a producer id or custom logger must be defined");function a(){0<Object.keys(o).length&&(i("log",{markers:o,schemaId:e.schemaId||"<ns>.Timer.1"},e.logOptions),o={}),clearTimeout(t),t=0}this.mark=function(e,r){o[e]=(void 0===r?c.time():r)-s,t=t||setTimeout(a,u)},c.once("$beforeunload",a),c.once("$beforePageTransition",a)}r&&c.register(e,{instance:function(e){return new n(e||{})}})});
csa.plugin(function(i){var t,a,o,r,d=i.config["PageViews.ImpressionMinimumTime"]||1e3,e="addEventListener",n="hidden",s="innerHeight",c="innerWidth",g="renderedTo",f=g+"Viewed",m=g+"Meaningful",u=g+"Impressed",l=1,v=2,h=3,p=4,P=5,T="loaded",y=7,I=8,w=i.global,E=i("Events",{producerId:"csa"}),V=w.document,$={},b={},M=P;if(!V||!V[e]||void 0===V[n])return C("PageStateChange.2",{state:"ignored"});function S(e){if(!$[y]){var n;if($[e]=i.time(),e!==h&&e!==T||(t=t||$[e]),t&&M===p)a=a||$[e],(n={})[m]=t-o,n[f]=a-o,C("PageView.4",n),r=r||setTimeout(L,d);if(e!==P&&e!==l&&e!==v||(clearTimeout(r),r=0),e!==l&&e!==v||C("PageRender.3",{transitionType:e===l?"hard":"soft"}),e===y)(n={})[m]=t-o,n[f]=a-o,n[u]=$[e]-o,C("PageImpressed.2",n)}}function C(e,n){b[e]||(n.schemaId="<ns>."+e,E("log",n,{ent:"all"}),b[e]=1)}function H(){0===w[s]&&0===w[c]?(M=I,i("Events")("setEntity",{page:{viewport:"hidden-iframe"}})):M=V[n]?P:p,S(M)}function L(){S(y),r=0}function R(){var e=o?v:l;$={},b={},a=t=0,o=i.time(),S(e),H()}function W(){var e=V.readyState;"interactive"===e&&S(h),"complete"===e&&S(T)}R(),V[e]("visibilitychange",H,!1),V[e]("readystatechange",W,!1),i.on("$afterPageTransition",R),i.once("$load",W),i.on("$timing:loaded",W)});
csa.plugin(function(c){var i,t="Content",e="MutationObserver",n="requestAnimationFrame",r="addedNodes",u="querySelectorAll",a="matches",o="getAttributeNames",s="getAttribute",f="dataset",l="producerId",d={ent:{element:1,page:["pageType","subPageType","requestId"]}},m=5,h=10,g="csaC",p=g+"Id",v={},y=c.config,E=y[t+".Selectors"]||[],b=y[t+".WhitelistedAttributes"]||{href:1,class:1},I=y[t+".EnableContentEntities"],w=c.global,A=w.document||{},C=A.documentElement,k=w.HTMLElement,L={},N=[],O=function(t,e,n,i){var r=this,o=c("Events",{producerId:t});r.id=e.id,r.l=o,r.e=e,r.el=n,r.rt=i,r.dlo=d,r.log=function(t,e){o("log",t,e||d)},e.id&&o("setEntity",{element:e})},U=O.prototype;function q(t){var e=(t=t||{}).element,n=t.target;return e?function(t,e){var n;n=t instanceof k?_(t)||S(e[l],t,F,c.time()):L[t.id]||$(e[l],0,t,c.time());return n}(e,t):n?function(t){var e,n=function(t){var e=null,n=0;for(;t&&n<h;){if(n++,T(t,p)){e=t;break}t=t.parentElement}return e}(t);e=n?_(n):new O("csa",{id:null},null,c.time());return e}(n):c.error("No element or target argument provided.")}function T(t,e){if(t&&t.dataset)return t.dataset[e]}function j(t,e,n){N.push({n:n,e:t,t:e}),D()}function x(){for(var t=c.time(),e=0;0<N.length;){var n=N.shift();if(v[n.n](n.e,n.t),++e%10==0&&c.time()-t>m)break}i=0,N.length&&D()}function D(){i=i||w[n](x)}function M(t,e,n){return{n:t,e:e,t:n}}function S(t,e,n,i){var r=c.UUID(),o={id:r};return e[f][p]=r,n(o,e),$(t,e,o,i)}function $(t,e,n,i){I&&(n.schemaId="<ns>.ContentEntity.2"),n.id=n.id||c.UUID();var r=new O(t,n,e,i);return I&&r.log({schemaId:"<ns>.ContentRender.1",timestamp:i}),c.emit("$content.register",r),L[n.id]=r}function _(t){return L[(t[f]||{})[p]]}function F(t,e){o in e&&(function(n,i){Object.keys(n[f]).forEach(function(t){if(!t.indexOf(g)&&g.length<t.length){var e=function(t){return(t[0]||"").toLowerCase()+t.slice(1)}(t.slice(g.length));i[e]=n[f][t]}})}(e,t),function(e,n){(e[o]()||[]).forEach(function(t){t in b&&(n[t]=e[s](t))})}(e,t))}C&&w[n]&&A[u]&&w[e]&&(E.push({selector:"*[data-csa-c-type]",entity:F}),E.push({selector:".celwidget",entity:function(t,e){F(t,e),t.slotId=t.slotId||e[s]("cel_widget_id")||e.id,t.type=t.type||"widget"}}),v[1]=function(t,e){t.forEach(function(t){t[r]&&t[r].constructor&&"NodeList"===t[r].constructor.name&&Array.prototype.forEach.call(t[r],function(t){N.unshift(M(2,t,e))})})},v[2]=function(o,c){u in o&&a in o&&E.forEach(function(t){var e=t.selector,n=o[a](e),i=o[u](e);n&&N.unshift(M(3,{e:o,s:t},c));for(var r=0;r<i.length;r++)N.unshift(M(3,{e:i[r],s:t},c))})},v[3]=function(t,e){var n=t.e;_(n)||S("csa",n,t.s.entity,e)},v[4]=function(){c.register(t,{instance:q})},new w[e](function(t){j(t,c.time(),1)}).observe(C,{childList:!0,subtree:!0}),j(C,c.time(),2),j(null,c.time(),4),c.on("$content.export",function(e){Object.keys(e).forEach(function(t){U[t]=e[t]})}))});
csa.plugin(function(n){var i,t="IntersectionObserver",r="getAttribute",o="dataset",s="intersectionRatio",m="csaCId",a=n.config["Content.ImpressionMinimumTime"]||1e3,c=n.global,e=((c.performance||{}).timing||{}).navigationStart||n.time(),l={};function u(t){t&&(t.v=1,function(t){t.vt=n.time(),t.el.log({schemaId:"<ns>.ContentView.2",timeToViewed:t.vt-t.el.rt,pageFirstPaintToElementViewed:t.vt-e})}(t))}function f(t){t&&!t.it&&(t.i=n.time()-t.is>a,function(t){t.it=n.time(),t.el.log({schemaId:"<ns>.ContentImpressed.2",timeToImpressed:t.it-t.el.rt,pageFirstPaintToElementImpressed:t.it-e})}(t))}c[t]&&(i=new c[t](function(t){t.forEach(function(t){var e=function(t){if(t&&t[r])return l[t[o][m]]}(t.target);if(e){var i=t.intersectionRect;t.isIntersecting&&0<i.width&&0<i.height&&(e.v||u(e),.5<=t[s]&&!e.is&&(e.is=n.time(),e.timer=c.setTimeout(f.bind(this,e),a))),t[s]<.5&&!e.it&&e.timer&&(c.clearTimeout(e.timer),e.is=0,e.timer=0)}})},{threshold:[0,.5]}),n.on("$content.register",function(t){var e=t.el;e&&(l[t.id]={el:t,v:0,i:0,is:0,vt:0,it:0},i.observe(e))}))});
csa.plugin(function(c){var n=c.global,u=c.emit,d=5,m="click";function f(n){if(n.id)return"//*[@id='"+n.id+"']";var t=function(n){var t,e=1;for(t=n.previousSibling;t;t=t.previousSibling)t.nodeName===n.nodeName&&(e+=1);return e}(n),e=n.nodeName;return 1!==t&&(e+="["+t+"]"),n.parentNode&&(e=f(n.parentNode)+"/"+e),e}function t(n,t,e){var a=c("Content",{target:e}),i={schemaId:"<ns>.ContentInteraction.1",interaction:n,interactionData:t,messageId:c.UUID()},r=f(e);if(r&&(i.attribution=r),n===m){var o=function(n){for(var t=n,e=t.tagName,a=!1,i=0;i<d;i++){if(!t||!t.parentElement){a=!0;break}e=(t=t.parentElement).tagName+"/"+e}return a||(e=".../"+e),e}(e);o&&(i.interactionData.parentChain=o)}a("log",i),u("$content.interaction",i)}function e(n){c.exec(function(){t(m,{interactionX:""+n.pageX,interactionY:""+n.pageY},n.target)})()}(n.document||{}).documentElement.addEventListener(m,e,{capture:!0,passive:!0})});
csa.plugin(function(e){e.emit("$content.export",{mark:function(t,n){var o=this;o.t||(o.t=e("Timers",{logger:o.l,schemaId:"<ns>.ContentLatency.1",logOptions:o.dlo})),o.t("mark",t,n)}})});

csa.plugin(function(i){var e="CacheDetection",n="csa-cache",s="onsuccess",u="target",d="result",p="exp",f=i.exec,t=i.config,g=t[e+".RequestID"],l=t[e+".Callback"],v=1,c=i.global,r=c.document||{},a=c.indexedDB,h=c.IDBKeyRange,I=i("Events"),x=i("Events",{producerId:"csa"});if(a&&h)try{var o=a.open(n);o.onupgradeneeded=f(function(e){e[u][d].createObjectStore(n).createIndex(p,p)}),o[s]=f(function(e){var o=e[u][d].transaction(n,"readwrite").objectStore(n);o.get(g)[s]=f(function(e){var n=D("session-id"),t=function(e){var n=D("cdn-rid");if(n)return{r:n,s:"cdn"};if(e)return{r:i.UUID().toUpperCase().replace(/-/g,"").slice(0,20),s:"device"}}(e[u][d])||{},c=t.r,r=t.s,a=!!c;!function(e){var n=Date.now(),t=h.upperBound(n);e.index(p).openCursor(t)[s]=f(function(e){var n=e[u][d];n&&(n.delete(),n.continue())}),e.put({exp:n+60*v*60*1e3},g)}(o),function(e,n,t){if(n){I("setEntity",{page:{pageSource:"cache",requestId:e,cacheRequestId:g},session:{id:t}}),x("log",{schemaId:"<ns>.CacheImpression.1"},{ent:"all"})}}(c,a,n),a&&l&&l(c,n,r)})})}catch(e){}function D(e){try{var n=r.cookie.match(RegExp("(^| )"+e+"=([^;]+)"));return n&&n[2].trim()}catch(e){}}});
csa.plugin(function(d){var t,i="normal",s="reload",n="history",o="new-tab",e="ajax",r=1,a=2,u="lastActive",c="lastInteraction",l="used",g="csa-tabbed-browsing",f="visibilityState",p="<ns>.TabbedBrowsing.1",v="visible",b=d.global,m=d("Events",{producerId:"csa"}),I=b.location,y=b.document,h=b.JSON,T=((b.performance||{}).navigation||{}).type,w=d.store,L=d.storageSupport(),z=!1,C={},E={},P={},S={},A=!1,R=!1;function U(i){try{return h.parse(w(g,void 0,{session:i})||"{}")||{}}catch(i){d.error('Could not parse storage value for key "'+g+'": '+i)}return{}}function $(i,t){w(g,h.stringify(t||{}),{session:i})}function j(i){var t=E.tid||i.id,n=C[u]||{};n.tid===t&&(n.pid=i.id),S={pid:i.id,tid:t,lastInteraction:E[c]||{},initialized:!0},P={lastActive:n,lastInteraction:C[c]||{},time:d.time()}}function k(i){var t=i===o,n=y.referrer,e=!(n&&n.length)||function(t){try{return t&&t.length?new URL(t).origin:null}catch(i){d.error('Could not parse URL "'+t+'" while getting origin:'+i)}return null}(n)!==I.origin,r=t&&e,a={type:i,toTabId:S.tid,toPageId:S.pid,transitTime:d.time()-C.time||null};r||function(i,t,n){var e=i===s,r=t?C[u]||{}:E,a=C[c]||{},d=E[c]||{},o=t?a:d;n.fromTabId=r.tid,n.fromPageId=r.pid,e||!o.id||o[l]||(n.interactionId=o.id||null,a.id===o.id&&(a[l]=!0),d.id===o.id&&(d[l]=!0))}(i,t,a),m("log",{navigation:a,schemaId:p},{ent:{page:["pageType","subPageType","requestId"]}})}function q(i){!function(){C=U(!1),E=U(!0);var i=C[c],t=E[c],n=!1,e=!1;i&&t&&i.id===t.id&&i[l]!==t[l]&&(n=!i[l],e=!t[l],t[l]=i[l]=!0,n&&$(!1,C),e&&$(!0,E))}(),j(i),A=!0,function(i){var t,n;t=B(),n=J(),(t||n)&&j(i)}(i)}function x(){z?k(e):(z=!0,k(T===a?n:T===r?E.initialized?s:o:E.initialized?i:o))}function B(){return!(!A||!t)&&(E[c]={id:t.messageId,used:!(C[c]={id:t.messageId,used:!1})},!(t=null))}function J(){var i=!1;R=y[f]===v,A&&(i=function(i,t){var n=!1,e=i[u];return R?e&&e.tid===S.tid&&e[v]&&e.pid===t||(i[u]={visible:!0,pid:t,tid:E.tid||S.tid},n=!0):e&&e.tid===S.tid&&e[v]&&(n=!(e[v]=!1)),n}(C,E.pid||S.pid));return i}L.local&&L.session&&h&&y&&y.addEventListener&&f in y&&(d.on("$pageChange",function(i){q(i),x(),$(!1,P),$(!0,S),E=S,C=P},{buffered:1}),d.on("$content.interaction",function(i){t=i,B()&&($(!1,C),$(!0,E))}),y.addEventListener("visibilitychange",function(){J()&&$(!1,C)},{capture:!1,passive:!0}))});